<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="ecommerce_offer_list" model="ir.ui.view">
        <field name="name">ecommerce.offer.list</field>
        <field name="model">ecommerce.offer</field>
        <field name="arch" type="xml">
            <list string="E-commerce Offer"
                editable="bottom"
                open_form_view="True"
                multi_edit="1"
            >
                <field name="name"/>
                <field name="sku"/>
                <field name="matched_product_id" context="{'default_name': name, 'default_default_code': sku}"/>
                <field name="ecommerce_account_id"/>
                <field name="sync_stock"/>
                <field name="ec_product_identifier" optional="hide" groups="base.group_no_one"/>
                <field name="ec_product_template_identifier" optional="hide" groups="base.group_no_one"/>
                <button
                    string="View on E-commerce"
                    type="object"
                    name="action_view_online"
                    icon="fa-external-link"
                />
            </list>
        </field>
    </record>
    <record id="ecommerce_offer_form" model="ir.ui.view">
        <field name="name">ecommerce.offer.form</field>
        <field name="model">ecommerce.offer</field>
        <field name="arch" type="xml">
            <form string="E-commerce Offer">
                <header>
                    <button type="object" name="action_view_online">View on E-commerce</button>
                </header>
                <sheet>
                    <div class="oe_title" id="title">
                        <h2>
                            <field name="name"/>
                        </h2>
                    </div>
                    <group>
                        <group>
                            <field name="sku"/>
                            <field name="sync_stock"/>
                            <field name="matched_product_id" context="{'default_name': name, 'default_default_code': sku}"/>
                        </group>
                    </group>
                    <notebook>
                        <page name="E-commerce" string="E-commerce">
                            <group>
                                <group>
                                    <field name="ecommerce_account_id"/>
                                    <field name="ec_product_identifier" groups="base.group_no_one"/>
                                    <field name="ec_product_template_identifier" groups="base.group_no_one"/>
                                </group>
                                <group name="ecommerce_specific_fields">
                                </group>
                            </group>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>
    <record id="ecommerce_offer_search" model="ir.ui.view">
        <field name="name">ecommerce.offer.search</field>
        <field name="model">ecommerce.offer</field>
        <field name="arch" type="xml">
            <search>
                <field name="name"/>
                <field name="sku"/>
                <filter name="product_empty" string="No matched product" domain="[('matched_product_id', '=', False)]"/>
                <group>
                    <filter name="product_tmpl" string="E-commerce Product Template" context="{'group_by': 'ec_product_template_identifier'}"/>
                </group>
            </search>
        </field>
    </record>
    <record id="model_ecommerce_offer_action_matched_products" model="ir.actions.server">
        <field name="name">Auto Match Products</field>
        <field name="model_id" ref="odoo_ecommerce.model_ecommerce_offer"/>
        <field name="binding_model_id" ref="odoo_ecommerce.model_ecommerce_offer"/>
        <field name="binding_view_types">list</field>
        <field name="state">code</field>
        <field name="code">action = records.auto_match_products()</field>
    </record>
</odoo>
